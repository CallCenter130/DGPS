---
// src/components/Link.astro (Versión Final Verificada)

interface Props {
  href: string;
  embed?: boolean;
  class?: string;
  [key:string]: any;
}
const { href, embed = false, class: className, ...rest } = Astro.props;
const base = import.meta.env.BASE_URL;

// new URL() construye la ruta completa respetando 'base'
// y Astro se encargará de añadir el trailing slash según la configuración.
const finalHref = new URL(href, Astro.site).pathname;

const finalUrl = embed ? `${finalHref}?embed=true` : finalHref;
---
<a href={finalUrl} class:list={[className]} {...rest}>
  <slot />
</a>