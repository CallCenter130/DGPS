---
// Definimos los videos aquí mismo, dentro del componente.
const videos = [
    { title: "Salud Mental y Condiciones de Trabajo", videoId: '_fBYpIPo61Q' },
    { title: "Protocolo de Riesgos Psicosociales", videoId: 'gw0BKv7YnYI' },
    { title: "Actuaciones Personales", videoId: 'K6WKAc-Yx3A' }
];
// La función buildEmbedUrl no es necesaria porque construimos la URL directamente en el iframe.
---
<!-- El div raíz con los estilos que lo integran en el sistema de pestañas -->
<div class="bg-white p-6 sm:p-8 rounded-lg shadow-md">
    <div class="text-center mb-10">
        <h2 class="font-display text-3xl font-bold text-primary">
            Material Audiovisual de Apoyo
        </h2>
        <p class="mt-2 text-lg text-gray-600">
            Seleccione un video de la lista para reproducirlo.
        </p>
    </div>

    <!-- Tu estructura original, ahora dentro del componente -->
     <div 
                x-data=`{ activeVideoId: '${videos[0].videoId}' }` 
                class="grid grid-cols-1 lg:grid-cols-3 gap-8 max-w-6xl mx-auto"
            >
                
                <!-- Columna del Reproductor Principal -->
                <div class="lg:col-span-2 aspect-video bg-black rounded-lg shadow-lg overflow-hidden">
                    <iframe 
                        :src="`https://www.youtube-nocookie.com/embed/${activeVideoId}?rel=0&autoplay=0`"
                        class="w-full h-full" 
                        title="YouTube video player"
                        frameborder="0" 
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                        allowfullscreen
                    ></iframe>
                </div>

                <!-- Columna de la Playlist (Visible por defecto) -->
                <div class="bg-white p-4 rounded-lg shadow-lg max-h-[60vh] overflow-y-auto">
                    <h3 class="text-xl font-bold text-dark mb-4 border-b pb-2 sticky top-0 bg-white">
                        Lista de Reproducción
                    </h3>
                    <div class="space-y-2">
                        {videos.map((video, index) => (
                            <button 
                                @click=`activeVideoId = '${video.videoId}'`
                                class="w-full text-left p-3 rounded-md transition-all duration-200 flex items-center space-x-3"
                                :class="activeVideoId === '${video.videoId}' ? 'bg-primary text-white font-semibold' : 'hover:bg-gray-100 text-gray-800'"                                
                            >
                                <span class="text-gray-400 font-mono w-6 text-center">{index + 1}.</span>
                                <span class="flex-1">{video.title}</span>
                            </button>
                        ))}
                    </div>
                </div>
            </div>
    
    <!-- La sección sobre Chile la podemos dejar en la página principal o moverla aquí si prefieres -->
</div>