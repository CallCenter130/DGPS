---
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import Sidebar from '../components/Sidebar.astro';
import Tutorial from '../components/Tutorial.astro';
import '../styles/global.css'; 
import { ViewTransitions } from 'astro:transitions';
export interface Props { title: string; description: string; }
const { title, description } = Astro.props;
const urlParams = new URLSearchParams(Astro.url.search);
const isEmbed = urlParams.get('embed') === 'true';
const faviconUrl = `${import.meta.env.BASE_URL.replace(/\/$/, '')}/favicon.svg`;
---
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{title}</title>
    <meta name="description" content={description} />
    <link rel="icon" type="image/svg+xml" href={faviconUrl} />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <ViewTransitions />
    <ViewTransitions fallback="animate" />
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
</head>
<body class:list={["bg-light text-dark font-sans antialiased", isEmbed && "h-screen overflow-hidden"]}>
    
    {isEmbed ? (
        // MODO EMBEBIDO: Layout tipo Aplicación/Dashboard
        <div x-data="{ isSidebarOpen: true }" class="flex h-screen bg-gray-100">
            <Sidebar />
            <div class="flex-1 flex flex-col overflow-hidden">
                <main class="flex-1 overflow-x-hidden overflow-y-auto">
                    <div class="p-4 sm:p-6 md:p-8">
                        <slot />
                    </div>
                </main>
            </div>
        </div>
    ) : (
        // MODO NORMAL: Layout de Página Web Tradicional
        <div class="flex flex-col min-h-screen">
            <Header />
            <main class="flex-grow">
                <slot />
                 <Tutorial />
            </main>
            <Footer />
        </div>
    )}
        <!--script is:inline>
                document.addEventListener('astro:after-swap', () => {
                    window.scrollTo(0, 0);
                    if (window.Alpine) {
                        window.Alpine.start();
                    }
                });
        </script-->
</body>
</html>
